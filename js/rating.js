function PDRTJS_url_encode(a){return encodeURIComponent(a).replace(/\%20/g,"+").replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/\~/g,"%7E")}function PDRTJS_is_defined(a){return typeof a=="undefined"?false:true}function PDRTJS_RATING(settings){function $(a){return document.getElementById(a)}var server=("https:"==document.location.protocol?"https:":"http:")+"//polldaddy.com";for(var property in settings){this[property]=settings[property]}var pc='<p style="padding: 0px; margin: 0px; clear: both;"></p>';var c=0;var token="";this.make_call=function(a){if(this.override!=null){a=a+"&override=true"}var b=document.createElement("SCRIPT");b.charset="utf-8";b.src=server+a;var c=document.getElementsByTagName("head").item(0);c.appendChild(b)};this.callback=function(a,b,c,d,e,f){if(this.callback_url!=null){true_callback_url=this.callback_url.replace(/{id}/,a);true_callback_url=true_callback_url.replace(/{unique_id}/,b);true_callback_url=true_callback_url.replace(/{type}/,c);true_callback_url=true_callback_url.replace(/{r}/,d);true_callback_url=true_callback_url.replace(/{voter_id}/,e);if(c=="stars"){true_callback_url=true_callback_url.replace(/{scores}/,this.votes+","+this.avg_rating)}else{true_callback_url=true_callback_url.replace(/{scores}/,this.nero_up+","+this.nero_dn)}if(f){true_callback_url=true_callback_url+"&change=true"}var g=document.createElement("SCRIPT");g.charset="utf-8";g.src=true_callback_url;var h=document.getElementsByTagName("head").item(0);h.appendChild(g)}};this.get_rating=function(){this.varname="PDRTJS_"+this.id+this.item_id;this.make_call("/ratings/rate.php?cmd=get&id="+this.id+"&uid="+this.unique_id+"&item_id="+this.item_id)};this.init=function(){eval("settings = PDRTJS_settings_"+this.id+this.item_id+";");for(var property in settings){this[property]=settings[property]}this.build()};this.build=function(){this.font=this.font_italic+" "+this.font_bold+" "+this.font_size+"/"+this.font_line_height+" "+this.font_family;var a=$("pd_rating_holder_"+this.id+this.item_id);a.style.display="inline-block";this.star_margin="1px";if(this.custom_star.length>0){this.star_image=this.custom_star;this.star_margin="1px"}else{if(this.type=="stars"){this.star_image=(this.is_secure()?"https://polldaddy.com":"http://i0.poll.fm")+"/ratings/images/star-"+this.star_color+"-"+this.size+".png"}else{this.star_image=(this.is_secure()?"https://polldaddy.com":"http://i0.poll.fm")+"/ratings/images/nero-"+this.star_color+"-"+this.size+".png"}}this.image_size="16px";if(this.size=="med"){this.image_size="20px"}else{if(this.size=="lrg"){this.image_size="24px"}}if(this.type=="stars"){var b="";var c="";var d="bottom left";var e=this.text_rate_this;if(this.votes>0){d="top left";e=this.votes+" ";if(this.votes==1&&typeof this.text_vote!="undefined"){e+=this.text_vote}else{e+=this.text_votes}}if(this.font_position=="right"){c='<div id="'+this.varname+'_msg" style="float:left; padding-left: 5px; text-align: '+this.font_align+"; font:"+this.font+"; color: #"+this.font_color+';">'+e+"</div>"}else{c='<div id="'+this.varname+'_msg" style="text-align: '+this.font_align+";font:"+this.font+";color: #"+this.font_color+';">'+e+"</div>"}if(this.font_position=="top"){b+=c+pc}b+='<div id="pd_rate_'+this.id+this.item_id+'" style="float:left;">';for(h=1;h<=5;h++){if(this.avg_rating>0){if(this.avg_rating<h){d="bottom left"}if(this.avg_rating==h-1+.5){d="center left"}}b+='<div onmouseout="'+this.varname+'.rebuild();" onclick="'+this.varname+".rate("+h+');" onmouseover="'+this.varname+".hover("+h+');" id="'+this.varname+"_stars_"+h+'" style="cursor: pointer; width: '+this.image_size+"; height: "+this.image_size+"; line-height: "+this.image_size+"; background: url("+this.star_image+") "+d+"; float: left; padding: 0px; marging: 0px; margin-right: "+this.star_margin+';"> </div>'}b+="</div>"}else{var b="";var c="";var f="bottom";var g="left";var e=new Array;e[0]=this.text_rate_this;e[1]="";e[2]="";var h=0;if(this.nero_up!=null){e[1]=this.nero_up}else{this.nero_up=0;e[1]="0"}if(this.nero_dn!=null){e[2]=this.nero_dn}else{this.nero_dn=0;e[2]="0"}if(this.font_position=="right"){c='<div id="'+this.varname+'_msg" style="float:left; padding-left: 5px; text-align: '+this.font_align+"; font:"+this.font+"; color: #"+this.font_color+';">'+e[0]+"</div>"}else{c='<div id="'+this.varname+'_msg" style="text-align: '+this.font_align+"; font:"+this.font+"; color: #"+this.font_color+';">'+e[0]+"</div>"}if(this.font_position=="top"){b+=c+pc}b+='<div id="pd_rate_'+this.id+this.item_id+'" style="float:left;">';for(h=1;h<=2;h++){if(h==2){g="right"}b+='<div onmouseout="'+this.varname+'.rebuild();" onclick="'+this.varname+".rate("+h+');" onmouseover="'+this.varname+".hover("+h+');" id="'+this.varname+"_nero_"+h+'" style="cursor: pointer; width: '+this.image_size+"; height: "+this.image_size+";  line-height: "+this.image_size+"; background: url("+this.star_image+") "+f+" "+g+'; float: left; padding: 0px; marging: 0px; margin: 0px;"> </div>';b+='<div id="'+this.varname+"_msg_"+h+'" style="text-align: center; font:'+this.font+"; color: #"+this.font_color+'; float:left; padding: 0px 4px;">'+e[h]+"</div>"}b+="</div>"}b+=this.buildPopup();if(this.font_position=="bottom"){b+=pc+c+pc}else{if(this.font_position=="right"){b+=c+pc}}a.innerHTML=b+'<img src="'+(this.is_secure()?"https:":"http:")+'//pixel.quantserve.com/pixel/p-ab3gTb8xb3dLg.gif" style="display: none;" border="0" height="1" width="1" alt="Quantcast"/>'};this.buildPopup=function(){var a=true;if(this.popup=="off"){a=false;this.get_results(99)}if($("pd_popup_holder_"+this.id+this.item_id)==null){var b="#pd_popup_holder_"+this.id+this.item_id+" { position:absolute; display:none; width:"+(a?"350":"175")+"px; height:auto; top:0px; left:0px; z-index:10000; border:solid 1px #CCC; background-color:white; padding:0px 15px;font-family:Arial,Sans;box-shadow: -10px 10px 20px rgba(0, 0, 0, .5);-webkit-box-shadow: 0px 0px 6px rgba(0, 0, 0, .25);-moz-box-shadow: 0px 0px 6px rgba(0, 0, 0, .25); }";var c=document.createElement("style");c.setAttribute("type","text/css");c.setAttribute("id","pd_popup_holder_style_"+this.id+this.item_id);if(c.styleSheet){c.styleSheet.cssText=b}else{c.appendChild(document.createTextNode(b))}var d=document.getElementsByTagName("head").item(0);d.appendChild(c)}return'<span style="float:left;"> </span><div id="rating_info_'+this.id+this.item_id+'" style="display:'+(a?"block":"none")+";float:left;background:url("+(this.is_secure()?"https://polldaddy.com":"http://i0.poll.fm")+'/images/ratings/info.png) no-repeat 3px 2px;width:16px;height:16px;cursor:pointer;" onclick="javascript:'+this.varname+'.togglePopup();return false;"><span style="display:none;">i</span></div><div class="pd_popup_holder" id="pd_popup_holder_'+this.id+this.item_id+'"> </div>'};this.togglePopup=function(){var a=$("pd_popup_holder_"+this.id+this.item_id);if(a.style.display=="block"){a.style.display="none";$("rating_info_"+this.id+this.item_id).style.border=""}else{this.get_results(0)}};this.showPopup=function(){var a=$("pd_popup_holder_"+this.id+this.item_id);var b=$("rating_info_"+this.id+this.item_id);a.style.display="block";var c=this.getElementPos(b);var d=this.getElementSize(b);var e=this.getViewPos();var f=this.getViewSize();var g=this.getElementSize(a);var h=x=y=0;var i=border=1;var j=$("pd_rate_"+this.id+this.item_id).offsetWidth+border*2;var k=x=c[h]-j;var l=f[h];var m=e[h];var n=g[h];var o=d[h];var p=0;if(k+n-m>l){p=k+j-n+o;if(p<l+m&&p>0){x=p}}var q=d[i]+border*2;k=y=c[i]+q;var r=f[i];var s=e[i];var t=g[i];var u=d[i];var v=0;if(k+t-s>r){v=k-q-t;if(v<r+s&&v>0){y=v}}a.style.left=x+"px";a.style.top=y+"px"};this.popdown=function(a){$("pd_popup_holder_"+this.id+this.item_id).style.display="none"};this.getElementPos=function(a){var b=e2=a;var c=y=0;if(b.offsetParent){do{c+=b.offsetLeft;y+=b.offsetTop}while(b=b.offsetParent)}while((e2=e2.parentNode)&&e2.nodeName.toUpperCase()!=="BODY"){c-=e2.scrollLeft;y-=e2.scrollTop}return[c,y]};this.getElementSize=function(a){return[a.offsetWidth,a.offsetHeight]};this.getViewPos=function(){if(typeof window.pageYOffset==="number"){return[window.pageXOffset,window.pageYOffset]}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){return[document.documentElement.scrollLeft,document.documentElement.scrollTop]}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){return[document.body.scrollLeft,document.body.scrollTop]}else{return[0,0]}}}};this.getViewSize=function(){if(typeof window.innerWidth==="number"){return[window.innerWidth,window.innerHeight]}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){return[document.documentElement.clientWidth,document.documentElement.clientHeight]}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){return[document.body.clientWidth,document.body.clientHeight]}else{return[0,0]}}}};this.get_results=function(a){var b="";var c="";if(typeof document.lastChild.attributes!=="undefined"&&document.lastChild.attributes!=null){if(typeof document.lastChild.attributes.dir!=="undefined"&&document.lastChild.attributes.dir!=null){c="&dir="+document.lastChild.attributes.dir.textContent}}for(var d in ratings_text){if(PDRTJS_is_defined(this[d])&&this[d]!=ratings_text[d]){b+="&"+d+"="+PDRTJS_url_encode(this[d])}}var e=this.id;if(this.override!=null){e=this.override}this.make_call("/ratings/rating-results.php?id="+e+"&item_id="+this.item_id+"&period="+a+"&item_count=3"+(this.popup=="off"?"&off":"")+b+c)};this.rebuild=function(){if(!this.kill_hover){this.timeout_id=setTimeout(this.varname+".build()",800)}};this.cancel_rebuild=function(){if(this.timeout_id!=null){clearTimeout(this.timeout_id);this.timeout_id=null}};this.rate=function(a){if(!this.kill_hover){var b=this.get_voter_id();if(this.type=="stars"){$(this.varname+"_msg").innerHTML=this.text_thank_you}else{$(this.varname+"_msg").innerHTML=this.text_thank_you;if(b==0){if(a==1){$(this.varname+"_msg_1").innerHTML=this.nero_up+1}else{$(this.varname+"_msg_2").innerHTML=this.nero_dn+1}}}this.kill_hover=true;var c="";var d="&cmd=rate";var e="";if(this.type=="stars"){e="&votes="+this.votes+"&avg="+this.avg_rating}else{e="&up="+this.nero_up+"&down="+this.nero_dn}if(b!=0){d="&cmd=change&vid="+PDRTJS_url_encode(b)}else{d="&cmd=rate"}c="/ratings/rate.php?title="+PDRTJS_url_encode(this.title)+"&permalink="+PDRTJS_url_encode(this.permalink)+"&type="+this.type+"&id="+this.id+"&r="+a+"&uid="+this.unique_id+"&item_id="+this.item_id+e+d+"&token="+this.token;this.make_call(c);setTimeout(this.varname+".build()",2e3);setTimeout(this.varname+".kill_hover = false",6e3)}};this.hover=function(rating){if(!this.kill_hover){if(this.type=="stars"){this.cancel_rebuild();for(c=1;c<=5;c++){if(c<=rating){$(this.varname+"_stars_"+c).style.background="url("+this.star_image+") top right"}else{$(this.varname+"_stars_"+c).style.background="url("+this.star_image+") bottom right"}}$(this.varname+"_msg").innerHTML=eval("this.text_"+rating+"_star")}else{this.cancel_rebuild();var image_pos=" top left";var msg=this.text_rate_up;if(rating==2){image_pos=" top right";msg=this.text_rate_down}$(this.varname+"_nero_"+rating).style.background="url("+this.star_image+") "+image_pos;$(this.varname+"_msg_"+rating).style.fontWeight="bold";$(this.varname+"_msg").innerHTML=msg}}};this.set_voter_id=function(a){if(this.voter_id!=null){if(document.cookie.length>4e3){var b=document.cookie.split(";");var c=new Array;var d=0;var e=0;for(var f=0;f<b.length;f++){var g=b[f];if(g.indexOf("PDRTJS_")!=-1){g=g.replace(/^\s\s*/,"").replace(/\s\s*$/,"");e+=g.length;c[d++]=g}}if(e>3e3){for(var f=0;f<c.length;f++){var g=c[f];e-=g.length;var h=g.indexOf("=");if(h>0){g=unescape(g.substring(0,h))}document.cookie=g+"=0;expires=Thu, 01-Jan-1970 00:00:01 GMT;path=/;";if(e<3e3){break}}}}a=typeof a=="undefined"?30:parseInt(a);var i=new Date;i.setTime(i.getTime());var j=60*60*24*a*1e3;var k=new Date(i.getTime()+j);var l="PDRTJS_"+this.type+"_"+this.id+(this.item_id.length>0?this.item_id:escape(this.unique_id));document.cookie=l+"="+escape(this.voter_id)+";expires="+k.toGMTString()+";path=/;"}};this.get_voter_id=function(){var a="PDRTJS_"+this.type+"_"+this.id+(this.item_id.length>0?this.item_id:escape(this.unique_id));var b=""+document.cookie;var c=b.indexOf(a+"=");if(c==-1||a==""){return 0}else{var d=b.indexOf(";",c);if(d==-1){d=b.length}return unescape(b.substring(c+a.length+1,d))}};this.is_secure=function(){return"https:"==document.location.protocol?true:false};if(this.item_id==null){this.item_id=""}this.get_rating()}var ratings_text=new Array;ratings_text.text_vote="Vote";ratings_text.text_votes="Votes";ratings_text.text_rate_this="Rate This";ratings_text.text_1_star="1 star";ratings_text.text_2_star="2 stars";ratings_text.text_3_star="3 stars";ratings_text.text_4_star="4 stars";ratings_text.text_5_star="5 stars";ratings_text.text_thank_you="Thank You";ratings_text.text_rate_up="Rate Up";ratings_text.text_rate_down="Rate Down";ratings_text.text_popcontent="Most Popular Content";ratings_text.text_close="Close";ratings_text.text_all="All";ratings_text.text_today="Today";ratings_text.text_thisweek="This Week";ratings_text.text_thismonth="This Month";ratings_text.text_rated="Rated";ratings_text.text_noratings="There are no rated items for this period";var PDRTJS_doc=document.getElementsByTagName("div");var PDRTJS_id="";for(var i=0;i<PDRTJS_doc.length;i++){if(PDRTJS_doc[i].id.substring(0,17)=="pd_rating_holder_"){PDRTJS_id=PDRTJS_doc[i].id.replace(/pd_rating_holder_/,"");eval("if ( typeof PDRTJS_"+PDRTJS_id+" == 'undefined' ){PDRTJS_"+PDRTJS_id+" = new PDRTJS_RATING( PDRTJS_settings_"+PDRTJS_id+" );}")}}